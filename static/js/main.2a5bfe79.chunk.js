(this.webpackJsonpakkord=this.webpackJsonpakkord||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n.p+"static/media/musical-notes.b0e1bcc7.svg"},function(e,t,n){e.exports=n(14)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(5),c=n.n(o),i=(n(12),n(2)),l=n(3),s=n(1),u=n(6),f=n.n(u),p=(n(13),12);function h(e){return e*p}function m(e){return[].concat.apply([],e)}function d(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=[],a=0;a<e.length;a++){var o=e[a],c=a>0&&e[a-1];c&&c.staffPosition-o.staffPosition>t&&(n.push(r),r=[]),r.push(o)}return n.push(r),n}var E,O,b,g,v=function(e){return a.a.createElement("rect",{y:h(e.position)+2,x:e.x,key:e.position,width:e.width,height:"1",className:"staff__line"})};v.defaultProps={width:200,x:0},function(e){e.C="C",e.CSharp="CSharp",e.D="D",e.DSharp="DSharp",e.E="E",e.F="F",e.FSharp="FSharp",e.G="G",e.GSharp="GSharp",e.A="A",e.ASharp="ASharp",e.H="H",e.DFlat="CSharp",e.EFlat="DSharp",e.GFlat="FSharp",e.AFlat="GSharp",e.HFlat="ASharp"}(E||(E={})),function(e){e[e.OCTUPLE=8]="OCTUPLE",e[e.LONGA=4]="LONGA",e[e.BREVE=2]="BREVE",e[e.WHOLE=1]="WHOLE",e[e.HALF=.5]="HALF",e[e.QUARTER=.25]="QUARTER",e[e.EIGHTH=.125]="EIGHTH",e[e.SIXTEENTH=.0625]="SIXTEENTH",e[e.THIRTYSECOND=.03125]="THIRTYSECOND",e[e.SIXTYFOURTH=.015625]="SIXTYFOURTH",e[e.HUNDREDTWENTYEIGHTH=.0078125]="HUNDREDTWENTYEIGHTH",e[e.TWOHUNDREDFIFTYSIXTH=.00390625]="TWOHUNDREDFIFTYSIXTH"}(O||(O={})),function(e){e[e.ROOT=0]="ROOT",e[e.FIRST_INVERSION=1]="FIRST_INVERSION",e[e.SECOND_INVERSION=2]="SECOND_INVERSION"}(b||(b={})),function(e){e.LEFT="LEFT",e.RIGHT="RIGHT"}(g||(g={}));var S=a.a.createContext({x:0}),y=function(e){var t=Object(r.useContext)(S).x;return a.a.createElement(S.Provider,{value:{x:e.x+t}},e.children)},T=function(e){return e<.5?void 0:"url(#hollowNoteHeadMask".concat(e<1?g.LEFT:g.RIGHT,")")},x=function(e){var t=e.x,n=e.positionInStaff,r=e.noteValue,o=h(n);return a.a.createElement("ellipse",{cx:t+15,cy:o+2,rx:15,ry:11,className:"note__head",fill:"white",strokeWidth:0,mask:T(r),onClick:function(){return console.log("Klikk",r)}})},j=function(e){var t=[];return e.maxExtent>=11?t=new Array(e.maxExtent-10).fill(0).map((function(e,t){return t+11})).filter((function(e){return e%2!==0})):e.maxExtent<0&&(t=new Array(-1*e.maxExtent).fill(0).map((function(e,t){return-1*t-1})).filter((function(e){return e%2!==0}))),a.a.createElement(a.a.Fragment,null,t.map((function(t){return a.a.createElement(v,{key:t,position:t,x:e.x-5,width:40})})))},w=function(e){var t=e.toneInfo,n=e.isBottom,o=e.isTop,c=e.noteValue,i=t.staffPosition,l=Object(r.useContext)(S);return a.a.createElement(a.a.Fragment,null,(n&&i>=11||o&&i<0)&&a.a.createElement(j,{maxExtent:i,x:l.x})||void 0,a.a.createElement(x,{key:t.strKey,x:l.x,positionInStaff:i,noteValue:c}))};w.defaultProps={isTop:!0,isBottom:!0,noteValue:O.QUARTER};var F=[E.C,E.CSharp,E.D,E.DSharp,E.E,E.F,E.FSharp,E.G,E.GSharp,E.A,E.ASharp,E.H],I=[-5,-4,-3,-2,-1,0,1,2,3,4,5,6],H=function(e){return F.findIndex((function(t){return t===e.baseTone}))+12*e.octave},k=function(e,t){var n=H(e);return N(n+2*t)},N=function(e){var t,n,r,a=(t=e.valueOf(),n=F.length,[Math.floor(t/n),t%n]),o=Object(s.a)(a,2),c=o[0],i=o[1];return{baseTone:(r={baseTone:F[i],octave:I[c+5]}).baseTone,octave:r.octave}},R=function(e){switch(e.baseTone){case E.GSharp:case E.FSharp:case E.CSharp:case E.ASharp:case E.DSharp:return"sharp";case E.AFlat:case E.DFlat:case E.EFlat:case E.GFlat:case E.HFlat:return"flat";default:return null}};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e,t){return t===b.FIRST_INVERSION?[k(e[0],6),e[1],e[2]]:t===b.SECOND_INVERSION?[k(e[0],6),k(e[1],6),e[2]]:e},D=function(e){return function(t){return n=t,Boolean(e[n.baseTone]&&n.accidental&&n.accidental!==e[n.baseTone])?C({},t,{},function(e){return{staffPosition:"sharp"===e.accidental?e.staffPosition-1:e.staffPosition+1,accidental:"sharp"===e.accidental?"flat":"sharp"}}(t)):t;var n}},G=function(e,t){return C({},e,{inversion:t,tones:A(e.rootTones,t)})},L=function(e){var t=e.staffPosition,n=e.column,o=e.symbolId,c=e.scrollTargetGroup,i=Object(r.useContext)(S),l=h(t-1),s=30*n;return a.a.createElement("use",{xlinkHref:"#".concat(o),x:i.x+s,y:l,"data-scrolltargetgroup":c})},V=function(e){return a.a.createElement(L,Object.assign({},e,{symbolId:"sharp"}))},B=function(e){return a.a.createElement(L,Object.assign({},e,{symbolId:"flat"}))},W=a.a.createContext({replacer:function(e){return e}}),_=function(e){var t=Object(r.useMemo)((function(){return D(e.preferredAccidentals)}),[e.preferredAccidentals]);return a.a.createElement(W.Provider,{value:{replacer:t}},e.children)},U=function(e){var t=e.direction;return a.a.createElement("mask",{id:"hollowNoteHeadMask".concat(t),maskContentUnits:"objectBoundingBox",maskUnits:"objectBoundingBox"},a.a.createElement("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"}),a.a.createElement("ellipse",{cx:".5",cy:".5",rx:".25",ry:".4",fill:"black",transform:"rotate(".concat(40*(t===g.LEFT?1:-1),", .5, .5)")}))},M=function(e){var t=e.lineHeight;return a.a.createElement("symbol",{id:"sharp",width:40,height:2.5*t,viewBox:"0 0 10 20"},a.a.createElement("g",{className:"sharp",stroke:"white",strokeWidth:2.5},a.a.createElement("line",{x1:2,x2:2,y1:1,y2:20,strokeWidth:1.5}),a.a.createElement("line",{x1:8,x2:8,y1:0,y2:19,strokeWidth:1.5}),a.a.createElement("line",{x1:0,x2:10,y1:6,y2:3,strokeWidth:3.5}),a.a.createElement("line",{x1:0,x2:10,y1:16,y2:13,strokeWidth:3.5})))},K=function(e){var t=e.lineHeight;return a.a.createElement("symbol",{id:"flat",width:40,height:2.5*t,viewBox:"5 0 10 20"},a.a.createElement("text",{x:0,y:20,lengthAdjust:"spacingAndGlyphs",textLength:20,color:"white",style:{font:"bold 30px sans-serif",fill:"white"},strokeWidth:1.5},"\u266d"))},Y=function(e){var t=Math.min(e.topStaffLine||0,0),n=Math.max(e.bottomStaffLine||9,9);console.log("topStaffLine, bottomStaffLine = ",t,n);var r,o=(r=e.children,150*a.a.Children.count(r)+200||0),c=20*(n-t)+50;return a.a.createElement("div",{className:"staff",style:{overflowX:"scroll",width:"100%"}},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:20*(n-t),viewBox:"0 ".concat(20*t-50," ").concat(o," ").concat(c),className:"staff"},a.a.createElement(U,{direction:g.LEFT}),a.a.createElement(U,{direction:g.RIGHT}),a.a.createElement(M,{lineHeight:p}),a.a.createElement(K,{lineHeight:p}),a.a.createElement(_,{preferredAccidentals:e.preferredAccidentals||{}},[1,3,5,7,9].map((function(e){return a.a.createElement(v,{key:e,position:e,width:o+100})})),a.a.Children.map(e.children,(function(e,t){return a.a.createElement(y,{x:100*t,key:"child-".concat(t)},e)})))))},X=function(e){return a.a.createElement("button",{onClick:function(){return e.onClick(e.chordSpec)}},e.chordSpec.name)},Q=function(e){return a.a.createElement("div",null,Object.values(E).map((function(t,n){var r={baseTone:t,octave:0},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.ROOT;return A([e,k(e,1.5),k(e,3.5)],t)}(r,b.ROOT),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.ROOT;return A([e,k(e,2),k(e,3.5)],t)}(r,b.ROOT),i=function(t){e.addChord(t)},l=t.replace("Sharp","#").replace("Flat","\u266d");return a.a.createElement(a.a.Fragment,{key:n},a.a.createElement(X,{chordSpec:{tones:o,noteValue:O.HALF,name:l,inversion:b.ROOT,rootTones:o},onClick:i}),a.a.createElement(X,{chordSpec:{tones:c,noteValue:O.HALF,name:l+"m",inversion:b.ROOT,rootTones:c},onClick:i}))})))},J=function(e){var t=e.sortedNotePositions,n=e.scrollTargetGroup,o=t[0],c=t[t.length-1],i=c>5&&c<14?"up":"down",l="up"===i?c-8:c,s="down"===i?o+8:o,u=h(l)+5,f=h(s)-u,p=Object(r.useContext)(S);return a.a.createElement("rect",{y:h(l)+5,x:p.x,width:4,height:f,className:"stem__line","data-scrolltargetgroup":n})};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $=function(e){return function(){switch(e.baseTone){case E.C:case E.CSharp:return 11;case E.D:case E.DSharp:return 10;case E.E:case E.EFlat:return 9;case E.F:case E.FSharp:return 8;case E.G:case E.GFlat:case E.GSharp:return 7;case E.A:case E.AFlat:case E.ASharp:return 6;case E.H:case E.HFlat:return 5;default:throw new Error("Invalid tone: "+JSON.stringify(e))}}()-7*e.octave},z=function(e){var t=[E.C,E.CSharp,E.D,E.DSharp,E.E,E.F,E.FSharp,E.G,E.GSharp,E.A,E.ASharp,E.H],n=function(e){switch(e){case E.EFlat:return E.DSharp;case E.GFlat:return E.FSharp;case E.AFlat:return E.GSharp;case E.HFlat:return E.ASharp;default:return e}}(e.baseTone);return t.findIndex((function(e){return e===n}))+12+12*e.octave},Z=function(e){return e.baseTone+e.octave};function ee(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{midiNote:z(e),strKey:Z(e),staffPosition:$(e),accidental:R(e)})}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=function(e,t){return n=e.midiNote,r=t.midiNote,n.valueOf()-r.valueOf();var n,r},ae=function(e,t,n,r){return 1===n.length?r:t%2===0&&g.RIGHT||g.LEFT},oe=function(e){var t=e.map((function(e){return e.tones})).flat().map($).reduce((function(e,t){var n=Object(s.a)(e,2),r=n[0],a=n[1];return[Math.min(r,t),Math.max(a,t)]}),[1/0,-1/0]),n=Object(s.a)(t,2);return[n[0],n[1]]},ce=function(e){var t=Object(r.useContext)(W),n=e.tones.map(ee).map(t.replacer).sort(re),o=d(n,1),c=d(n.filter((function(e){return e.accidental})),2),i=n[n.length-1].staffPosition<6?g.LEFT:g.RIGHT,s=m(o.map((function(t,n){return t.map((function(r,a){return{toneInfo:ne({},r),isTop:n===o.length-1&&a===t.length-1,isBottom:0===n&&0===a,stemSide:ae(0,a,t,i),noteValue:e.noteValue,accidental:r.accidental}}))}))),u=m(c.map((function(e,t){return e.map((function(n,r){return{accidental:n.accidental,isTop:t===c.length-1&&r===e.length-1,isBottom:0===t&&0===r,staffPosition:n.staffPosition,column:r%3,strKey:"".concat(n.strKey,"-accidental")}}))}))),f=s.map((function(e){return e.toneInfo.staffPosition})),p=Object(r.useContext)(S).x,h=p+34*Math.max.apply(Math,[0].concat(Object(l.a)(u.map((function(e){return e.column+1}))))),E=s.find((function(e){return e.stemSide===g.RIGHT}))?h+27:h,O=E+1,b={scrollTargetGroup:e.scrollTargetGroup};return a.a.createElement("g",{onClick:e.onClick},a.a.createElement(y,{x:p},u.map((function(e){return"sharp"===e.accidental&&a.a.createElement(V,Object.assign({},e,{key:e.strKey},b))||"flat"===e.accidental&&a.a.createElement(B,Object.assign({},e,{key:e.strKey},b))}))),a.a.createElement(y,{x:h},s.filter((function(e){return e.stemSide===g.RIGHT})).map((function(e){return a.a.createElement(w,Object.assign({key:e.toneInfo.strKey},e,b))}))),a.a.createElement(y,{x:E},a.a.createElement(J,Object.assign({sortedNotePositions:f,noteValue:e.noteValue},b))),a.a.createElement(y,{x:O},s.filter((function(e){return e.stemSide===g.LEFT})).map((function(e){return a.a.createElement(w,Object.assign({key:e.toneInfo.strKey},e,b))}))))};ce.defaultProps={noteValue:O.QUARTER};var ie=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(null),u=Object(s.a)(c,2),p=u[0],h=u[1];Object(r.useLayoutEffect)((function(){if(p){var e=document.querySelectorAll("*[data-scrolltargetgroup = '".concat(p,"']")),t=e[e.length-1];t&&t.scrollIntoView()}}),[p]);var m=function(e,t){var r=n[e],a=[b.ROOT,b.FIRST_INVERSION,b.SECOND_INVERSION],c=(r.inversion+t)%a.length;!function(e,t){var r=Object(l.a)(n);r[e]=t,o(r)}(e,G(r,a[c]))},d=oe(n),O=Object(s.a)(d,2),g=O[0],v=O[1];return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"}),a.a.createElement(Q,{setChords:o,addChord:function(e){o([].concat(Object(l.a)(n),[e])),h("chord-"+(n.length-1))}}),a.a.createElement(Y,{preferredAccidentals:Object(i.a)({},E.HFlat,"flat"),topStaffLine:g,bottomStaffLine:v},n.map((function(e,t){return a.a.createElement(ce,{tones:e.tones,noteValue:e.noteValue,key:t,onClick:function(){return m(t,1)},scrollTargetGroup:"chord-"+t})}))),a.a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"Learn React")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement((function(){return a.a.createElement(ie,null)}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[7,1,2]]]);
//# sourceMappingURL=main.2a5bfe79.chunk.js.map